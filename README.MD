# API Simulador de Controle de Fichas DICT

Esta API foi desenvolvida exclusivamente para simular cen√°rios de transa√ß√µes e consultas no DICT (Diret√≥rio de Identificadores de Contas Transacionais). N√£o realiza transa√ß√µes ou consultas reais, mas simula o comportamento das regras de limita√ß√£o de consultas.

## üöÄ Quick Start

**Para executar o projeto completo:**

```bash
./start-all.sh
```

Ou veja o guia completo em [COMO_EXECUTAR.md](./COMO_EXECUTAR.md)

**Para verificar se est√° funcionando:**

```bash
./check-status.sh
```

## Interface Web (Frontend)

A aplica√ß√£o agora inclui uma interface web moderna e responsiva desenvolvida com React e Bootstrap. Para acessar o frontend, inicie o servidor e acesse `http://localhost:3000` no seu navegador.

### Funcionalidades do Frontend:
- **Dashboard com visualiza√ß√£o dos saldos dos baldes**
  - Exibi√ß√£o em tempo real dos saldos de clientes e ISPB
  - Gr√°ficos de progresso dos baldes
  - Indicadores visuais de status operacional
- **Download da Postman Collection** üÜï
  - Bot√£o com √≠cone para download da collection completa
  - Arquivo pronto para importar no Postman
  - Todas as rotas da API documentadas e prontas para teste
- **Bot√£o de Atualizar (Refresh)** üÜï
  - Atualiza os dados do dashboard sem recarregar a p√°gina
  - Indicadores visuais de carregamento (spinner + texto)
  - Tratamento silencioso de erros (logs no console)
  - Tempo de resposta < 2 segundos
- **Formul√°rios para simular transa√ß√µes PIX** (sucesso e falha)
- **Formul√°rios para simular consultas de chaves** (sucesso e falha)
- **Recarga autom√°tica dos baldes** via worker em background

## Rotas da API

### `/balde/saldos`

- **M√©todo**: GET
- **Descri√ß√£o**: Retorna os saldos dos baldes dos clientes e do ISPB.
- **Exemplo**:
  ```http
  GET /balde/saldos
  ```

### `/chave/sucesso`

- **M√©todo**: GET
- **Descri√ß√£o**: Simula uma consulta de chave bem-sucedida, desde que os saldos dos baldes permitam.
- **Par√¢metros**: walletId (ID da wallet que realiza a consulta)
- **Exemplo**:
  ```http
  GET /chave/sucesso?walletId=12345
  ```

### `/chave/falha`

- **M√©todo**: GET
- **Descri√ß√£o**: Simula uma consulta de chave que n√£o foi encontrada, desde que os saldos dos baldes permitam.
- **Par√¢metros**: walletId (ID da wallet que realiza a consulta)
- **Exemplo**:
  ```http
  GET /chave/falha?walletId=12345
  ```

### `/pix/balde/recarga`

- **M√©todo**: POST
- **Descri√ß√£o**: Simula a recarga dos saldos dos baldes dos clientes e do ISPB.
- **Exemplo**:
  ```http
  POST /pix/balde/recarga
  ```

### `/pix/sucesso`

- **M√©todo**: POST
- **Descri√ß√£o**: Simula uma transa√ß√£o de Pix bem-sucedida, desde que os saldos dos baldes permitam.
- **Par√¢metros**: walletId (ID da wallet que realiza a transa√ß√£o)
- **Exemplo**:
  ```http
  POST /pix/sucesso?walletId=12345
  ```

### `/pix/falha`

- **M√©todo**: POST
- **Descri√ß√£o**: Simula uma transa√ß√£o de Pix que falhou devido a uma chave inv√°lida, desde que os saldos dos baldes permitam.
- **Par√¢metros**: walletId (ID da wallet que realiza a transa√ß√£o)
- **Exemplo**:
  ```http
  POST /pix/falha?walletId=12345
  ```

## Rotas BFF (Backend for Frontend)

### `/bff/dashboard`

- **M√©todo**: GET
- **Descri√ß√£o**: Retorna os saldos dos baldes formatados para exibi√ß√£o no frontend.
- **Exemplo**:
  ```http
  GET /bff/dashboard
  ```

### `/bff/chave/sucesso`

- **M√©todo**: GET
- **Descri√ß√£o**: Simula uma consulta de chave bem-sucedida atrav√©s do BFF.
- **Par√¢metros**: walletId (ID da wallet que realiza a consulta)
- **Exemplo**:
  ```http
  GET /bff/chave/sucesso?walletId=12345
  ```

### `/bff/chave/falha`

- **M√©todo**: GET
- **Descri√ß√£o**: Simula uma consulta de chave que n√£o foi encontrada atrav√©s do BFF.
- **Par√¢metros**: walletId (ID da wallet que realiza a consulta)
- **Exemplo**:
  ```http
  GET /bff/chave/falha?walletId=12345
  ```

### `/bff/pix/sucesso`

- **M√©todo**: POST
- **Descri√ß√£o**: Simula uma transa√ß√£o de Pix bem-sucedida atrav√©s do BFF.
- **Par√¢metros**: walletId (ID da wallet que realiza a transa√ß√£o)
- **Exemplo**:
  ```http
  POST /bff/pix/sucesso?walletId=12345
  ```

### `/bff/pix/falha`

- **M√©todo**: POST
- **Descri√ß√£o**: Simula uma transa√ß√£o de Pix que falhou atrav√©s do BFF.
- **Par√¢metros**: walletId (ID da wallet que realiza a transa√ß√£o)
- **Exemplo**:
  ```http
  POST /bff/pix/falha?walletId=12345
  ```

### `/bff/recarga`

- **M√©todo**: POST
- **Descri√ß√£o**: Simula a recarga dos saldos dos baldes atrav√©s do BFF.
- **Exemplo**:
  ```http
  POST /bff/recarga
  ```

## Worker de Recarga

Este worker executa a tarefa de recarregar os saldos dos baldes em intervalos regulares, simulando a recarga de fichas.

- **Intervalo de Execu√ß√£o**: A cada 2 segundos.

Lembre-se de que esta API √© exclusivamente para fins de simula√ß√£o e n√£o realiza transa√ß√µes ou consultas reais. Ela √© destinada a testes e cen√°rios de treinamento. Certifique-se de adaptar a documenta√ß√£o e os exemplos de uso conforme necess√°rio para seu ambiente de desenvolvimento.

# Inicializando o Projeto

Siga estes passos para iniciar o projeto:

1. Clone o reposit√≥rio.
2. Acesse o diret√≥rio do projeto.
3. Instale as depend√™ncias com `npm install`.

## Comandos Dispon√≠veis

- `npm run build`: Compila o c√≥digo TypeScript.
- `npm run build:frontend`: Compila o frontend React.
- `npm run worker`: Inicia o worker de recarga de fichas.
- `npm run server`: Inicia o servidor da API.
- `npm start`: Inicia ambos worker e servidor.
- `npm run dev:worker`: Inicia o worker em modo de desenvolvimento.
- `npm run dev:server`: Inicia o servidor em modo de desenvolvimento.
- `npm run dev:frontend`: Inicia o frontend em modo de desenvolvimento.

Lembre-se de configurar o arquivo `.env` conforme necess√°rio.

Acesse a documenta√ß√£o das rotas da API na se√ß√£o anterior.

## Cr√©ditos

Este projeto foi desenvolvido por Bruno Vieira como parte de um projeto de simula√ß√£o para fins educacionais e de treinamento.